<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="/css/login.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>


<body style="background-color: #f3e5f5;">
    <section>

        <div class="form-group">
            <div style="text-align: center;">
                <h1>Login</h1>
            </div>
            <label for="">Email id</label><br>
            <input type="email" id="email">
            <span id="emerror" class="error-msg"></span>
        </div>

        <div class="form-group">
            <label for="">Password</label><br>
            <input type="password" id="pname">
            <span id="perror" class="error-msg"></span>
        </div>

        <div class="form-group">
            <button type="submit" id="sumbtn"><b>Login</b></button>
            <h4>you're a new user, please <a href="registration.html">Register</a></h4>
        </div>

    </section>


    <script>

        document.getElementById("sumbtn").addEventListener("click", () => {
            let email = document.querySelector("#email").value;
            let password = document.querySelector("#pname").value;

            let emerror = document.querySelector("#emerror");
            let perror = document.querySelector("#perror");

            emerror.innerHTML = "";
            perror.innerHTML = "";

            if (!email && !password) {
                emerror.innerHTML = "Email id is required";
                perror.innerHTML = "Password is required";
                return;
            }

            if (!email) {
                emerror.innerHTML = "Email id is required";
                return;
            }

            if (!password) {
                perror.innerHTML = "Password is required";
                return;
            }

            const user = JSON.parse(localStorage.getItem('user'));

            if (!user) {
                alert("No registered user found");
                return;
            }

            if (email !== user.email) {
                emerror.innerHTML = "Incorrect Email id";
                return;
            }

            if (password !== user.password) {
                perror.innerHTML = "Incorrect password";
                return;
            }

            alert("Login successful!");
            window.location.href = "index.html";
        });

        

    </script>
</body>

</html>