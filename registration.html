<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Page</title>
    <link rel="stylesheet" href="css/registration.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>

<body>

    <section>
        <div style="text-align: center;">
            <h1>Registration</h1>
        </div>
        <div class="form-group">
            <label for="">Enter Your Username</label><br>
            <input type="text" id="uname" required>
            <span id="uerror"></span>
        </div>

        <div class="form-group">
            <label for="">Enter Your email</label><br>
            <input type="email" id="email" required>
            <span id="emerror" class="error-msg"></span>
        </div>

        <div class="form-group">
            <label for="">Enter Your Password</label><br>
            <input type="password" id="pname" required>
            <span id="perror" class="error-msg"></span>
        </div>

        <div class="form-group">
            <label for="">Enter Your confirm Password</label><br>
            <input type="password" id="cpass" required>
            <span id="cperror" class="error-msg"></span>
        </div>

        <div class="form-group">
            <button type="submit" id="sumbtn">submit</button>
        </div><br>

        <div>
            <h4>Already have an account? <span><a href="index.html">Login</a></span></h4>
        </div>

    </section>

    <script>

        document.getElementById("sumbtn").addEventListener("click", (event) => {
            event.preventDefault();


            let uname = document.querySelector("#uname").value.trim();
            let email = document.querySelector("#email").value.trim();
            let pname = document.querySelector("#pname").value.trim();
            let cpname = document.querySelector("#cpass").value.trim();

            let uerror = document.querySelector("#uerror");
            let emerror = document.querySelector("#emerror");
            let perror = document.querySelector("#perror");
            let cperror = document.querySelector("#cperror");


            uerror.innerHTML = "";
            emerror.innerHTML = "";
            perror.innerHTML = "";
            cperror.innerHTML = "";

            function checkEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            function checkPassword(password) {
                return /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%#?&]{6,}$/.test(password);
            }


            let hasError = false;

            if (!uname) {
                uerror.innerHTML = "Username is required";
                hasError = true;
            }

            if (!email) {
                emerror.innerHTML = "Email is required";
                hasError = true;
            } else if (!checkEmail(email)) {
                emerror.innerHTML = "Invalid email";
                hasError = true;
            }

            if (!pname) {
                perror.innerHTML = "Password is required";
                hasError = true;
            } else if (!checkPassword(pname)) {
                perror.innerHTML = "Password must be at least 6 characters with a number";
                hasError = true;
            }

            if (!cpname) {
                cperror.innerHTML = "Confirm password is required";
                hasError = true;
            } else if (cpname !== pname) {
                cperror.innerHTML = "Passwords do not match";
                hasError = true;
            }

            if (hasError) return;


            const user = {
                username: uname,
                email: email,
                password: pname
            };

            localStorage.setItem('user', JSON.stringify(user));
            alert("Registration successful!");
            window.location.href = "index.html";
        });

    </script>


</body>

</html>